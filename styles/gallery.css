/* ---------- Skeleton ---------- */
@keyframes skeleton-shimmer{
  0%{background-position:-400px 0}
  100%{background-position:400px 0}
}
.skeleton{
  width:100%;height:260px;margin:0 0 1.4rem;
  border-radius:var(--radius);
  background:linear-gradient(90deg,#eee 25%,#f5f5f5 37%,#eee 63%);
  background-size:400% 100%;
  animation:skeleton-shimmer 1.2s ease-in-out infinite;
}

.gallery-grid{column-count:3;column-gap:1.4rem}
@media(max-width:900px){.gallery-grid{column-count:2}}
@media(max-width:540px){.gallery-grid{column-count:1}}

/* Masonry card base */
.gallery-card{
  display:inline-block;
  width:100%;
  position:relative;
  margin:0 0 1.4rem;
  background:#111;
  border-radius:var(--radius);
  overflow:hidden;
  transition:transform .3s var(--transition),box-shadow .3s var(--transition);
  break-inside:avoid;
}
.gallery-card img{
  display:block;
  width:100%;
  height:auto;
}
.gallery-card:hover,
.gallery-card:focus-within{
  transform:translateY(-6px) scale(1.02);
  box-shadow:0 8px 28px rgba(0,0,0,.12);
}
.gallery-card img.loading{
  background:#333;
  filter:blur(5px);
  animation:pulse 1.5s infinite;
}
@keyframes pulse{0%{opacity:.5;}50%{opacity:.9;}100%{opacity:.5;}}
.controls{
  margin:2rem auto;
  text-align:center;
  display:flex;
  gap:1rem;
  justify-content:center;
  flex-wrap:wrap;
  position:sticky;
  top:60px;
  z-index:800;
  background:#232323;
  padding:.5rem 1rem;
  box-shadow:0 2px 4px rgba(0,0,0,.4);
}
.badge{display:inline-block;padding:2px 6px;background:#3b7d4a;color:#fff;font-size:.75rem;border-radius:4px}
.likes{font-size:.8rem;margin-top:4px;color:#fcb400}

/* nicer card look */
.gallery-card img[src$='.svg']{object-fit:contain}
.gallery-card h3{margin:8px 0 4px;font-size:1rem}
.gallery-card p{margin:0 0 4px;font-size:.85rem;color:#bbb}
.gallery-card .inner{padding:8px}
/* dialog â€“ hidden when not [open] */
#previewModal{
  display:none;                     /* default (closed) */
  position:fixed;inset:0;
  padding:0;border:none;background:transparent;
  align-items:center;justify-content:center;
}
#previewModal[open]{               /* only when open attribute exists */
  display:flex;
  animation:fadeIn .3s ease;
}
#previewModal::backdrop{
  background:rgba(0,0,0,.8);
  animation:fadeIn .3s ease;
}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.modal-media{
  max-width:90vw;max-height:80vh;object-fit:contain
}
#modalContent{
  background:#222;
  padding:1rem;
  border-radius:8px;
  box-shadow:0 2px 8px rgba(0,0,0,.6);
  max-width:90vw;
}
#previewModal .like-btn{margin-top:10px}
.close-btn{
  position:absolute;top:6px;right:10px;font-size:24px;
  background:none;border:none;color:#fff;cursor:pointer;
}
.like-btn{
  background:none;
  border:none;
  cursor:pointer;
  font-size:.9rem;
  color:#fcb400;
  display:flex;
  align-items:center;
  gap:3px;
  margin-top:4px;
}
.like-btn.liked{opacity:.4;pointer-events:none}

/* comments UI */
#comments h4{margin:8px 0 4px}
.c-list{max-height:26vh;overflow-y:auto;margin-bottom:6px}
.c-item{background:#222;padding:6px;border-radius:6px;margin-bottom:4px}
#comments textarea,#comments input{width:100%;margin-bottom:4px}
#comments button{background:#3b7d4a;color:#fff;border:none;padding:4px 12px;border-radius:4px;cursor:pointer;font-size:.85rem}


/* comments panel */
#comments{
  margin-top:14px;background:#191919;padding:10px;border-radius:8px;
  width:100%;max-width:640px;box-shadow:0 0 6px rgba(0,0,0,.6);font-size:.9rem;
}
#comments h4{margin:0 0 8px;font-size:1rem;color:#f1f1f1}
.c-list{max-height:26vh;overflow-y:auto;margin-bottom:8px;padding-right:4px}
.c-item{background:#262626;padding:6px 8px;border-radius:6px;margin-bottom:6px}
.c-item strong{color:#3b7d4a}.c-item small{color:#888;margin-left:4px;font-size:.7rem}
#comments form{display:flex;flex-direction:column;gap:6px}
#comments input,#comments textarea{
  width:100%;background:#111;border:1px solid #333;color:#eee;border-radius:4px;padding:6px
}
#comments button{
  align-self:flex-end;background:#3b7d4a;border:none;color:#fff;
  padding:6px 16px;border-radius:4px;cursor:pointer;font-size:.85rem;
  transition:.2s background;
}
#comments button:hover{background:#469b57}
