<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <title>ุฑุงู ุงููู ููุฐูุงุก ุงูุงุตุทูุงุนู</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <link rel="stylesheet" href="styles/main.css">
  <link rel="icon" href="favicon.ico">

  <script src="js/env.js"></script>


  <!-- ุชุญููู config.js ุฃููุงู -->
  <script src="js/config.js"></script>

  <!-- ุซู ุชุญููู main.js -->
  <script defer src="js/main.js"></script>
</head>

<body>
<header class="navbar">
  <div class="navbar-container">
    <a class="logo" href="index-ar.html">Ramallah.ai</a>
    <button id="nav-hamburger" class="navbar-hamburger" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
    <nav class="navbar-links" id="navbar-links">
      <a href="index-ar.html" aria-current="page">ุงูุฑุฆูุณูุฉ</a>
      <a href="gallery-ar.html">ุงููุนุฑุถ</a>
      <a href="about-ar.html">ูู ูุญู</a>
      <a href="blog-ar.html">ูุฏููุฉ</a>
      <a href="index-ar.html#submit">ุฃุฑุณู ุนููู</a>
      <a href="creator-profiles-ar.html">ุงููุจุฏุนูู</a>
      <a href="contact-ar.html">ุงุชุตู ุจูุง</a>
    </nav>
    <a href="index.html" class="lang-toggle" lang="en">English</a>
  </div>
</header>

<main>
  <section class="hero">
    <h1>ุญูุซ ููุชูู ุงูุฅุจุฏุงุน ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู ููุณุทูู</h1>
    <p class="subtitle">ุดุงุฑู ุตูุฑูุ ููุณููุงูุ ููุฏูููุงุชูุ ูุฏููุงุชู ููุชุจู ุงูุฐููุฉ.</p>
    <a href="#submit" class="cta-btn">ุงูุถู ููุญุฑูุฉ</a>
  </section>

  <section class="success-stories">
    <h2>ูุตุต ูุฌุงุญ</h2>
    <div class="story-carousel">
      <article class="story-card">
        <img src="images/success/placeholder1.jpg" alt="">
        <h3>ูููู ูููู</h3>
        <p>ุจุงุณุชุฎุฏุงู Stable Diffusion ูRunway.</p>
      </article>
      <article class="story-card">
        <img src="images/success/placeholder2.jpg" alt="">
        <h3>ููุทูุนุฉ ุฑุงูู</h3>
        <p>ุชุฃููู AI ูู Ableton.</p>
      </article>
    </div>
  </section>

  <section id="submit" class="submit">
    <h2>ุดุงุฑู ุนููู</h2>
    <p class="helper-note">๐ ูุตูุญุฉ: ูุนูู ุฎูุงุฑ โุฃู ุดุฎุต ูุฏูู ุงูุฑุงุจุทโ ูู Google Drive.</p>
    <form id="ai-submit-form-ar" action="https://formspree.io/f/xrbpvebk" method="POST">
      <label>ุงูุงุณู <input name="fullName" required></label>
      <label>ููุน ุงูุนูู
        <select name="workType" required>
          <option>ุตูุฑุฉ</option>
          <option>ููุณููู</option>
          <option>ููุฏูู</option>
          <option>ูุฏููุฉ</option>
          <option>ููุงูุฉ</option>
          <option>ูุชุงุจ</option>
        </select>
      </label>
      <label>
        Upload file (image/video/audio):
        <input type="file" name="workFile" accept="image/*,video/*,audio/*">
      </label>      
      <label>ูุตู <textarea name="description" rows="3" required></textarea></label>
      <button class="cta-btn">ุฅุฑุณุงู</button>
    </form>
    <p class="form-note">ุชุฌุฑูุจู โ ูุง ูุชู ุญูุธ ุงููููุงุช.</p>

    <div id="thank-you-modal-ar" class="thank-you-modal">
      <div class="modal-content">
        <span id="close-modal-btn-ar" class="modal-close">&times;</span>
        <h3>ุดูุฑุงู ูู!</h3>
        <p>ุชู ุงุณุชูุงู ูุดุงุฑูุชู.</p>
      </div>
    </div>
  </section>
</main>

<footer class="footer">
  <small>ยฉ2025 Ramallah.ai</small>
</footer>

<!-- ุงูุณูุฑุจุช ุงูุฏุงุฎูู ููุนุงูุฌุฉ ุงูููุฑู -->
<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
  const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.querySelector('#ai-submit-form, #ai-submit-form-ar');
    if (!form) return;
  
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const lang = document.documentElement.lang === 'ar' ? 'ar' : 'en';
  
      const fileInput = form.workFile;
      let uploadedURL = '';
  
      // ุฅุฐุง ููู ููู ูุฑููุน
      if (fileInput && fileInput.files.length > 0) {
        const file = fileInput.files[0];
        const fileExt = file.name.split('.').pop();
        const filePath = `${Date.now()}-${file.name}`;
  
        const { data, error: uploadError } = await supabase.storage
          .from('uploads')
          .upload(filePath, file, { cacheControl: '3600', upsert: false });
  
        if (uploadError) {
          alert(lang === 'ar' ? 'ูุดู ุฑูุน ุงูููู' : 'File upload failed');
          return;
        }
  
        const { data: publicURL } = supabase.storage
          .from('uploads')
          .getPublicUrl(filePath);
  
        uploadedURL = publicURL.publicUrl;
      }
  
      const data = {
        creator_name: form.fullName.value,
        type: form.workType.value.toLowerCase(),
        link: uploadedURL || form.workLink?.value || '',
        title_en: lang === 'en' ? form.description.value : '',
        title_ar: lang === 'ar' ? form.description.value : '',
        desc_en: lang === 'en' ? form.description.value : '',
        desc_ar: lang === 'ar' ? form.description.value : '',
        status: 'pending'
      };
  
      const { error } = await supabase.from('submissions').insert([data]);
      if (error) {
        alert(lang === 'ar' ? 'ูุดู ุงูุฅุฑุณุงู. ุญุงูู ูุฌุฏุฏูุง.' : 'Submission failed. Please try again.');
        console.error(error);
        return;
      }
  
      const modalId = lang === 'ar' ? 'thank-you-modal-ar' : 'thank-you-modal';
      const modal = document.getElementById(modalId);
      if (modal) modal.style.display = 'block';
      form.reset();
  
      const closeBtnId = lang === 'ar' ? 'close-modal-btn-ar' : 'close-modal-btn';
      const closeBtn = document.getElementById(closeBtnId);
      if (closeBtn) {
        closeBtn.onclick = () => { modal.style.display = 'none'; };
      }
    });
  });
  </script>
  
  

</body>
</html>
